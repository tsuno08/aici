# AIを活用したCI環境セットアップガイド

このガイドでは、GitHub Actionsを使用してAIを活用したCI環境をセットアップする方法について説明します。

## 前提条件

- GitHubアカウント
- リポジトリの管理権限
- OpenAI APIキー（AIコードレビュー機能を使用する場合）

## セットアップ手順

### 1. リポジトリの準備

このリポジトリをテンプレートとして使用するか、既存のリポジトリに`.github/workflows`ディレクトリを作成し、提供されたワークフローファイルをコピーします。

### 2. シークレットの設定

1. リポジトリの「Settings」タブに移動します
2. 左側のメニューから「Secrets and variables」→「Actions」を選択します
3. 「New repository secret」ボタンをクリックします
4. 以下のシークレットを追加します：
   - 名前: `OPENAI_API_KEY`
   - 値: あなたのOpenAI APIキー

### 3. ワークフローのカスタマイズ

必要に応じて、各ワークフローファイルをプロジェクトの要件に合わせてカスタマイズします：

- `.github/workflows/ai-code-review.yml`: AIコードレビューの設定
- `.github/workflows/ai-test-lint.yml`: テストと静的解析の設定
- `.github/workflows/ai-security-scan.yml`: セキュリティスキャンの設定
- `.github/workflows/ai-dependency-management.yml`: 依存関係管理の設定

### 4. 依存関係の設定

プロジェクトに`requirements.txt`ファイルがない場合は作成し、必要な依存関係を追加します。

## 使用方法

### AIコードレビュー

プルリクエストを作成または更新すると、AIコードレビューが自動的に実行されます。レビューコメントはプルリクエストに直接追加されます。

### AIテストと静的解析

コードをプッシュするか、プルリクエストを作成すると、テストと静的解析が自動的に実行されます。テストカバレッジレポートはプルリクエストにコメントとして追加されます。

### AIセキュリティスキャン

コードをプッシュするか、プルリクエストを作成すると、セキュリティスキャンが自動的に実行されます。スキャン結果はプルリクエストにコメントとして追加されます。

### AI依存関係管理

依存関係管理ワークフローは毎週月曜日の深夜に自動的に実行されます。更新が必要な依存関係がある場合、AIによる分析レポートを含むプルリクエストが自動的に作成されます。

## トラブルシューティング

### ワークフローが失敗する場合

1. GitHub Actionsのログを確認して、エラーの原因を特定します
2. 必要なシークレットが正しく設定されていることを確認します
3. プロジェクトの構造がワークフローの期待に合っていることを確認します

### AIコードレビューが機能しない場合

1. OpenAI APIキーが正しく設定されていることを確認します
2. APIキーに十分なクレジットがあることを確認します
3. ワークフローファイルの設定を確認します

## ベストプラクティス

1. **テストの網羅性**: AIテストカバレッジ分析を最大限に活用するために、十分なテストを作成します
2. **コードスタイルの一貫性**: 静的解析ツールの設定をプロジェクトのコーディング規約に合わせます
3. **定期的なレビュー**: AIによる自動レビューは人間のレビューを補完するものであり、置き換えるものではありません
4. **セキュリティ対策**: AIセキュリティスキャンの結果を定期的に確認し、必要な対策を講じます

## 高度なカスタマイズ

### カスタムAIプロンプトの設定

AIコードレビューワークフローでは、カスタムプロンプトを設定できます。`ai-code-review.yml`ファイルの`PROMPT`セクションを編集して、AIに特定の指示を与えることができます。

### スケジュールの変更

依存関係管理やセキュリティスキャンのスケジュールを変更するには、対応するワークフローファイルの`cron`式を編集します。

### 追加のツールの統合

必要に応じて、追加の静的解析ツールやセキュリティスキャンツールをワークフローに統合できます。